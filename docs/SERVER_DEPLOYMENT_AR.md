# دليل المبتدئين الشامل: تشغيل بوت lak24 على IONOS

هذا الدليل مصمم خصيصاً ليناسب إعدادات سيرفر IONOS الخاص بك. اتبع هذه الخطوات لضمان عمل البوت بشكل مثالي على `https://chat.lak24.de`.

---

## الخطوة 1: تجهيز الملفات (على جهاز الكمبيوتر)

1.  **افتح مجلد المشروع** (المسمى `Chatbot`).
2.  **حدد كل الملفات والمجلدات** باستثناء:
    - `node_modules/`
    - `git/`
3.  **اضغط بالزر الأيمن** واختر **Compress to ZIP file**. قم بتسمية الملف `bot-release.zip`.

---

## الخطوة 2: الرفع إلى IONOS

1.  سجل الدخول إلى **IONOS Control Panel** -> **Hosting** -> **File Manager**.
2.  توجه إلى المجلد المرتبط بالنطاق الفرعي `chat.lak24.de` (بناءً على صورتك، هذا هو المجلد **`/Bot`**).
3.  اضغط على **Upload** في الأعلى واختر ملفك `bot-release.zip`.
4.  بعد الرفع، **اضغط بالزر الأيمن** على الملف واختر **Extract** (فك الضغط).

> [!IMPORTANT]
> يجب أن تكون جميع ملفاتك (مثل `config.php`, `index.php`, `chat.php`) موجودة مباشرة داخل مجلد **`/Bot`**. إذا كانت داخل مجلد فرعي آخر (مثل `/Bot/Chatbot/`)، فقم بنقلها لتكون مباشرة تحت `/Bot`.

---

## الخطوة 3: إصلاحات المجلدات والصلاحيات (Permissions)

سيرفر IONOS لديه قواعد خاصة لبعض المجلدات. اتبع هذا بدقة:

1.  **إذا كانت المجلدات التالية ناقصة**، اضغط على **"+ New Folder"** في الأعلى لإنشائها:
    - `data/`
    - `sessions/`
    - `cache/`
    - `uploads/`
2.  **حل مشكلة "اللوجز" (logs)**: نظام IONOS يمنعك من تعديل مجلد باسم `logs`.
    - اضغط على **"+ New Folder"** وقم بإنشاء مجلد جديد تماماً باسم **`bot_logs`**.
3.  **ضبط الصلاحيات (CHMOD)**:
    - اضغط بالزر الأيمن على كل من: `data`, `sessions`, `cache`, `uploads`, والمجلد الجديد `bot_logs`.
    - اختر **Permissions**.
    - اجعل القيمة **755** (أو تأكد من تفعيل خيار "Write" للمالك والمجموعة).
    - **ملاحظة**: تجاهل المجلد المسمى `logs` تماماً ولا تحاول تعديله.

---

## الخطوة 4: تفعيل قاعدة بيانات المنتجات (خطوة هامة جداً)

البوت يحتاج لتحميل المنتجات من lak24 و Awin و Amazon ليعرضها للزبائن.

1.  افتح المتصفح واكتب هذا الرابط: `https://chat.lak24.de/import-trigger.php`
2.  **انتظر**. ستظهر لك الآن تحديثات مباشرة مثل: `Progress: Imported 5000 products...`
3.  **لا تغلق الصفحة** أبداً حتى تظهر لك رسالة النجاح النهائية: `SUCCESS: Imported [Number] products`.
4.  عندما تظهر لك رسالة: `SUCCESS: Imported [Number] products` فقد انتهيت!
5.  **خطوة أمنية**: ارجع لمدير ملفات IONOS وقم بـ **حذف** ملف `import-trigger.php` فوراً.

---

## الخطوة 5: إعداد التحديث التلقائي (Cron Job)

لكي يقوم البوت بتحديث الأسعار والمنتجات تلقائياً كل ليلة دون تدخل منك:

1.  ادخل إلى **IONOS Control Panel** -> **Hosting** -> **Cron Jobs**.
2.  اضغط على **Create Cron Job**.
3.  **الاسم**: `Lak24 Search Sync`.
4.  **خيار (HTTP GET)**: الصق هذا الرابط بالضبط:
    `https://chat.lak24.de/import-trigger.php`
5.  **الجدول الزمني (Schedule)**: اختر **Daily** (مثلاً الساعة 3:00 صباحاً).
6.  اضغط **Save**.

---
6.  اضغط **Save**.

---

## الخطوة 6: ربط البوت بموقعك الأساسي (Embedding)

الآن بعد أن أصبح البوت جاهزاً، نحتاج لإظهاره في موقعك الرئيسي (`lak24.de`):

1.  **انسخ هذا الكود**:
    ```html
    <script src="https://chat.lak24.de/assets/js/embed.js"></script>
    ```
2.  **أين تضع هذا الكود؟**
    - **موقع PHP**: افتح ملف **`footer.php`** أو **`header.php`** المشترك. الصق الكود قبل وسم `</body>` (إذا كان الملف هو الفوتر) أو داخل `<head>` (إذا كان الهيدر). إذا لم يكن لديك ملف مشترك، الصقه في أسفل كل صفحة `.php`.
    - **ووردبريس (WordPress)**: من لوحة تحكم ووردبريس، اذهب إلى "مظهر" (Appearance) -> "محرر ملفات القالب". ابحث عن ملف **`footer.php`** والصق الكود مباشرة قبل وسم `</body>` في آخر الملف.
    - **موقع HTML عادي**: افتح ملفات موقعك الأساسية (مثل `index.html`) والصق الكود في الأسفل تماماً قبل وسم `</body>`.
3.  **جرب الموقع**: قم بتحديث صفحة موقعك الرئيسية، ستجد أيقونة **laki** ظهرت في الزاوية السفلى!

---

## الخطوة 7: التجربة النهائية!

1.  اذهب إلى الرابط: `https://chat.lak24.de`.
2.  اسأل البوت: `I want a laptop under 700 EUR`.
3.  **تأكد**: يجب أن يعرض لك عروضاً حقيقية بأسعار وروابط صحيحة.

---

### استكشاف الأخطاء:
- **"صفحة الاستيراد متوقفة"**: لقد قمت بتحديث السكربت ليتحمل الانتظار الطويل. افتح الرابط مرة أخرى وانتظر 5 دقائق كاملة.
- **"خطأ أحمر/صلاحيات"**: تأكد من وجود مجلد `bot_logs/` وضبط صلاحياته على **755**.
- **"نسخة PHP"**: تأكد من إعدادات IONOS أن النطاق يعمل بإصدار **PHP 8.3**.
